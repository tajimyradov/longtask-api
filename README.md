## üöß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ **–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞** –∏ **–æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **–æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á**
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- **–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –∑–∞–¥–∞—á (status + result)
- **–ü—Ä–æ—Å—Ç–æ–π –∏ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- –Ø–∑—ã–∫: **Go**
- Web: `net/http` + `gorilla/mux` –∏–ª–∏ `chi`
- –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á: in-memory (–Ω–∞ —Å—Ç–∞—Ä—Ç–µ, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ Redis/NSQ/RabbitMQ –ø–æ–∑–∂–µ)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á: in-memory map –∏–ª–∏ BoltDB/sqlite –¥–ª—è MVP
- –û–±—Ä–∞–±–æ—Ç–∫–∞: —Ñ–æ–Ω–æ–≤—ã–µ –≤–æ—Ä–∫–µ—Ä—ã (go routines + –∫–∞–Ω–∞–ª)
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–¥–∞—á ‚Äî —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

---

## ‚úÖ –ü–æ–≤–µ–¥–µ–Ω–∏–µ API

1. `POST /tasks` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É  
   - Request: `{ "type": "long_task", "payload": {...} }`
   - Response: `{ "id": "123", "status": "queued" }`

2. `GET /tasks/{id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç  
   - Response:  
     - `{ "id": "123", "status": "in_progress" }`  
     - `{ "id": "123", "status": "done", "result": {...} }`  
     - `{ "id": "123", "status": "failed", "error": "reason" }`

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
.
‚îú‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ task/
‚îÇ   ‚îú‚îÄ‚îÄ manager.go       # Task manager (create, track, store)
‚îÇ   ‚îú‚îÄ‚îÄ types.go         # Interfaces and task types
‚îÇ   ‚îú‚îÄ‚îÄ worker.go        # Background processing
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ handler.go       # HTTP endpoints
```

---

## üß© –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –¢–∏–ø—ã –ó–∞–¥–∞—á

```go
type Task interface {
	ID() string
	Type() string
	Payload() any
	Run(ctx context.Context) (any, error)
}
```

–ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —Ç–∏–ø –∑–∞–¥–∞—á–∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç `Task`.

---

## üí° –ü—Ä–∏–º–µ—Ä: –ü—Ä–æ—Å—Ç–∞—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∑–∞–¥–∞—á–∞

### task/types.go

```go
type LongTask struct {
	id      string
	payload map[string]interface{}
}

func (t *LongTask) ID() string          { return t.id }
func (t *LongTask) Type() string        { return "long_task" }
func (t *LongTask) Payload() any        { return t.payload }
func (t *LongTask) Run(ctx context.Context) (any, error) {
	// –ü—Ä–∏–º–µ—Ä –¥–æ–ª–≥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
	select {
	case <-time.After(3 * time.Minute):
		return map[string]string{"result": "success"}, nil
	case <-ctx.Done():
		return nil, ctx.Err()
	}
}
```

---

## üöÄ main.go (MVP)

```go
func main() {
	manager := task.NewManager()
	go manager.StartWorkerPool(5) // –∑–∞–ø—É—Å—Ç–∏—Ç—å 5 –≤–æ—Ä–∫–µ—Ä–æ–≤

	r := chi.NewRouter()
	r.Post("/tasks", api.CreateTaskHandler(manager))
	r.Get("/tasks/{id}", api.GetTaskHandler(manager))

	http.ListenAndServe(":8080", r)
}
```

---

## üß† –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–∞–¥–∞—á
- –í—ã–Ω–µ—Å—Ç–∏ –≤–æ—Ä–∫–µ—Ä—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket/Callback –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –ü–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ Prometheus)

---

## ‚ùóÔ∏è–í–∞–∂–Ω–æ

- –í–æ—Ä–∫–µ—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª, –∏ –∑–∞–¥–∞—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –º–∞–ø–µ `id -> TaskStatus`
- –í—Å—ë –ø—Ä–æ–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã **–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏** –∑–∞–Ω–∏–º–∞–ª–æ <5 –º–∏–Ω—É—Ç: –ø—Ä–æ—Å—Ç–æ –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `Task`

---
